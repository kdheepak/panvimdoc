<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>panvimdoc</title>
  <link rel="stylesheet" href="/panvimdoc/css/theme.css" />
  <link rel="stylesheet" href="/panvimdoc/css/skylighting-solarized-theme.css" />
</head>
<body>

<header>
<h1 class="title">panvimdoc</h1>
<blockquote class="metadata">
</blockquote>
</header>

<nav id="TOC" role="doc-toc">
    <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#panvimdoc" id="toc-panvimdoc">panvimdoc</a></li>
  <li><a href="#tldr" id="toc-tldr">TLDR</a></li>
  <li><a href="#usage" id="toc-usage">Usage</a>
  <ul>
  <li><a href="#using-github-actions" id="toc-using-github-actions">Using Github Actions</a></li>
  <li><a href="#using-it-manually" id="toc-using-it-manually">Using it manually</a></li>
  </ul></li>
  <li><a href="#motivation" id="toc-motivation">Motivation</a></li>
  <li><a href="#goals" id="toc-goals">Goals</a></li>
  <li><a href="#features" id="toc-features">Features</a></li>
  <li><a href="#specification" id="toc-specification">Specification</a></li>
  <li><a href="#references" id="toc-references">References</a></li>
  <li><a href="#specification" id="toc-specification">Specification</a>
  <ul>
  <li><a href="#external-includes" id="toc-external-includes">External includes</a></li>
  <li><a href="#codeblocks" id="toc-codeblocks">Codeblocks</a></li>
  </ul></li>
  <li><a href="#title" id="toc-title">Title</a></li>
  <li><a href="#heading" id="toc-heading">Heading</a>
  <ul>
  <li><a href="#sub-heading-2" id="toc-sub-heading-2">Sub Heading 2</a>
  <ul>
  <li><a href="#sub-heading-3" id="toc-sub-heading-3">Sub Heading 3</a></li>
  </ul></li>
  <li><a href="#markdown-links" id="toc-markdown-links">Markdown Links</a></li>
  <li><a href="#mappings" id="toc-mappings">Mappings</a></li>
  <li><a href="#table" id="toc-table">Table</a></li>
  <li><a href="#markdown-only-content" id="toc-markdown-only-content">Markdown only content</a></li>
  <li><a href="#details-and-summary" id="toc-details-and-summary">Details and summary</a></li>
  <li><a href="#keyboard-html-tag" id="toc-keyboard-html-tag">Keyboard HTML tag</a></li>
  <li><a href="#examples" id="toc-examples">Examples</a></li>
  <li><a href="#examples-1" id="toc-examples-1">Examples</a></li>
  </ul></li>
  </ul>
</nav>

<main>
<h1 id="panvimdoc">panvimdoc</h1>
<p>Decrease friction when writing documentation for your plugins. Write documentation in <a href="https://pandoc.org/MANUAL.html">pandoc markdown</a>. Generate documentation in vimdoc.</p>
<div class="center">
<p>This software is released under a MIT License.</p>
</div>
<h1 id="tldr">TLDR</h1>
<ol type="1">
<li><p>Choose <code>${VIMDOC_PROJECT_NAME}</code>. See <a href="./.github/workflows/panvimdoc.yml">.github/workflows/panvimdoc.yml</a> as an example.</p></li>
<li><p>Add the following to <code>./.github/workflows/panvimdoc.yml</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> panvimdoc</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">]</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">docs</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> pandoc to vimdoc</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v2</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> panvimdoc</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> kdheepak/panvimdoc@main</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">vimdoc</span><span class="kw">:</span><span class="at"> ${VIMDOC_PROJECT_NAME}</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> stefanzweifel/git-auto-commit-action@v4</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">commit_message</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Auto generate docs&quot;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">branch</span><span class="kw">:</span><span class="at"> ${{ github.head_ref }}</span></span></code></pre></div></li>
<li><p><code>README.md</code> gets converted to <code>./doc/${VIMDOC_PROJECT_NAME}.txt</code> and committed to the repo.</p></li>
</ol>
<h1 id="usage">Usage</h1>
<h3 id="using-github-actions">Using Github Actions</h3>
<p>Create an empty doc file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">touch</span> doc/<span class="va">${VIMDOC_PROJECT_NAME}</span>.txt</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-am</span> <span class="st">&quot;Add empty doc&quot;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre></div>
<p>You don’t actually need the file, just the <code>doc</code> folder but it is probably easiest to create a file.</p>
<p>Then add the following to <code>./.github/workflows/panvimdoc.yml</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> panvimdoc</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">]</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">docs</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> pandoc to vimdoc</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v2</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> panvimdoc</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> kdheepak/panvimdoc@main</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">vimdoc</span><span class="kw">:</span><span class="at"> ${VIMDOC_PROJECT_NAME}</span><span class="co"> # Output vimdoc project name (required)</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">          # The following are all optional</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">pandoc</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;README.md&quot;</span><span class="co"> # Input pandoc file</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;NVIM v0.8.0&quot;</span><span class="co"> # Vim version number</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co"> # Table of contents</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;&quot;</span><span class="co"> # Project Description</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">demojify</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span><span class="co"> # Strip emojis from the vimdoc</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">dedupsubheadings</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co"> # Add heading to subheading anchor links to ensure that subheadings are unique</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">treesitter</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co"> # Use treesitter for highlighting codeblocks</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">ignorerawblocks</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co"> # Ignore raw html blocks in markdown when converting to vimdoc</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">docmapping</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span><span class="co"> # Use h4 headers as mapping docs</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">docmappingprojectname</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co"> # Use project name in tag when writing mapping docs</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">shiftheadinglevelby</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span><span class="co"> # Shift heading levels by specified number</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">incrementheadinglevelby</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span><span class="co"> # Increment heading levels by specified number</span></span></code></pre></div>
<p>Choose <code>VIMDOC_PROJECT_NAME</code> appropriately. This is usually the name of the plugin or the documentation file without the <code>.txt</code> extension. For example, the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> panvimdoc</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> kdheepak/panvimdoc@main</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">vimdoc</span><span class="kw">:</span><span class="at"> panvimdoc</span></span></code></pre></div>
<p>Will output a file <code>doc/panvimdoc.txt</code> and the vim help tag for it will be <code>panvimdoc</code> using the <code>main</code> branch of the repository. It is recommended to pin to an exact version so you can be confident that no surprises occur for you or your users. See <a href="https://github.com/kdheepak/panvimdoc/releases/latest" class="uri">https://github.com/kdheepak/panvimdoc/releases/latest</a> for which version to use. Once you pick a version, you can pin it like so:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> panvimdoc</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> kdheepak/panvimdoc@vX.X.X</span></span></code></pre></div>
<p>For an example of how this is used, see one of the following workflows:</p>
<ul>
<li><a href="./.github/workflows/panvimdoc.yml">kdheepak/panvimdoc</a>: <a href="./doc/panvimdoc.txt">doc/panvimdoc.txt</a></li>
<li><a href="https://github.com/kdheepak/tabline.nvim/blob/main/.github/workflows/ci.yml">kdheepak/tabline.nvim</a>: <a href="https://github.com/kdheepak/tabline.nvim/blob/main/doc/tabline.txt">doc/tabline.txt</a></li>
<li><a href="https://github.com/mcchrish/zenbones.nvim/blob/main/.github/workflows/doc.yml">mcchrish/zenbones.nvim</a>: <a href="https://github.com/mcchrish/zenbones.nvim/blob/main/doc/zenbones.txt">doc/zenbones.txt</a></li>
<li><a href="https://github.com/nvim-lualine/lualine.nvim/blob/master/.github/workflows/autogen.yml">nvim-lualine/lualine.nvim</a>: <a href="https://github.com/nvim-lualine/lualine.nvim/blob/master/doc/lualine.txt">doc/lualine.txt</a></li>
</ul>
<p><em>Feel free to submit a PR to add your documentation as an example here.</em></p>
<h3 id="using-it-manually">Using it manually</h3>
<p>The <code>./panvimdoc.sh</code> script runs <code>pandoc</code> along with all the filters and custom output writer.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./panvimdoc.sh</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Usage:</span> ./panvimdoc.sh <span class="at">--project-name</span> PROJECT_NAME <span class="at">--input-file</span> INPUT_FILE <span class="at">--vim-version</span> VIM_VERSION <span class="at">--toc</span> TOC <span class="at">--description</span> DESCRIPTION <span class="at">--dedup-subheadings</span> DEDUP_SUBHEADINGS <span class="at">--treesitter</span> TREESITTER</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Arguments:</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--project-name:</span> the name of the project</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--input-file:</span> the input markdown file</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--vim-version:</span> the version of Vim that the project is compatible with</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--toc:</span> <span class="st">&#39;true&#39;</span> if the output should include a table of contents, <span class="st">&#39;false&#39;</span> otherwise</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--description:</span> a description of the project</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--dedup-subheadings:</span> <span class="st">&#39;true&#39;</span> if duplicate subheadings should be removed, <span class="st">&#39;false&#39;</span> otherwise</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--demojify:</span> <span class="st">&#39;false&#39;</span> if emojis should not be removed, <span class="st">&#39;true&#39;</span> otherwise</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--treesitter:</span> <span class="st">&#39;true&#39;</span> if the project uses Tree-sitter syntax highlighting, <span class="st">&#39;false&#39;</span> otherwise</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--ignore-rawblocks:</span> <span class="st">&#39;true&#39;</span> if the project should ignore HTML raw blocks, <span class="st">&#39;false&#39;</span> otherwise</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--doc-mapping:</span> <span class="st">&#39;true&#39;</span> if the project should use h4 headers as mapping docs, <span class="st">&#39;false&#39;</span> otherwise</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--doc-mapping-project-name:</span> <span class="st">&#39;true&#39;</span> if tags generated for mapping docs contain project name, <span class="st">&#39;false&#39;</span> otherwise</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="ex">--shift-heading-level-by:</span> 0 if you don<span class="st">&#39;t want to shift heading levels , n otherwise</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="st">  --increment-heading-level-by: 0 if don&#39;</span>t want to increment the starting heading number, n otherwise</span></code></pre></div>
<p>You will need <code>pandoc v3.0.0</code> or greater for this script to work.</p>
<h1 id="motivation">Motivation</h1>
<p>Writing documentation is work. Writing documentation in vimdoc for vim plugins is an additional hassle. Making writing vim plugin documentation frictionless is important.</p>
<p>Writing documentation in markdown and converting it to vimdoc can help toward that goal. This way, plugin authors will have to write documentation just once (for example, as part of the README of the project), and the vim documentation can be autogenerated.</p>
<p>Writing vim documentation requires conforming to a few simple rules. Although <code>vimdoc</code> is not a well defined spec, vim does have some nice syntax highlighting and features like tags and links when the text file is in <code>vimdoc</code> compatible format and when <code>filetype=help</code> in vim. Also, typically, while vim documentation are just plain text files, they are usually formatted well using whitespace. See <a href="https://vimhelp.org/helphelp.txt.html#help-writing" class="uri">https://vimhelp.org/helphelp.txt.html#help-writing</a> or <a href="https://github.com/nanotee/vimdoc-notes"><code>@nanotree</code>’s project</a> for more information. I think preserving these features and characteristics of vimdoc for documentation of vim plugins is important.</p>
<p>Writing documentation in Markdown and converting it to vimdoc is not a novel idea. For example, one can implement a neovim treesitter based markdown to vimdoc converter that works fairly well. See <a href="https://github.com/ibhagwan/ts-vimdoc.nvim">ibhagwan/ts-vimdoc.nvim</a> for more information. This approach is close to ideal. There are no dependencies, except for the Markdown treesitter parser. It is neovim only but you can use this on github actions even for a vim plugin documentation.</p>
<p>I found two other projects that do something similar, <a href="https://github.com/wincent/docvim">wincent/docvim</a> and <a href="https://github.com/FooSoft/md2vim">FooSoft/md2vim</a>. As far as I can tell, these projects are actively maintained and may suit your need.</p>
<p>However, none of these projects use Pandoc. Pandoc Markdown supports a wide number of features: See <a href="https://pandoc.org/MANUAL.html" class="uri">https://pandoc.org/MANUAL.html</a> for more information. Most importantly, it supports a range of Markdown formats and flavors. And, Pandoc has filters and a custom output writer that can be configured in lua. Pandoc filters can extend the capability of Pandoc with minimal lua scripting, and these are very easy to write and maintain too.</p>
<p>This project aims to write a specification of syntax in Pandoc Markdown, and to take advantage of Pandoc filters and the custom output writer capability, to convert a Markdown file to a vim documentation help file. This project provides a reference implementation of the specification as well.</p>
<h1 id="goals">Goals</h1>
<ul>
<li>Markdown file must be readable when the file is presented as the README on GitHub / GitLab / SourceHut etc.</li>
<li>Markdown file converted to HTML using Pandoc must be web friendly and render appropriately (if the user chooses to do so).</li>
<li>Vim documentation generated must support links and tags.</li>
<li>Vim documentation generated should be aesthetically pleasing to view, in vim and as a plain text file.
<ul>
<li>This means using columns and spacing appropriately.</li>
</ul></li>
<li>Format of built in Vim documentation is used as guidelines but not as rules.</li>
</ul>
<h1 id="features">Features</h1>
<ul>
<li>Autogenerate title for vim documentation</li>
<li>Autogenerate table of contents</li>
<li>Generate links and tags</li>
<li>Support markdown syntax for tables</li>
<li>Support raw vimdoc syntax where ever needed for manual control.</li>
<li>Support including multiple Markdown files</li>
</ul>
<h1 id="specification">Specification</h1>
<p>The specification is described in <a href="./doc/panvimdoc.md">panvimdoc.md</a> along with examples. The generated output is in <a href="./doc/panvimdoc.txt">panvimdoc.txt</a>. The reference implementation of the Pandoc lua filter is in <a href="./scripts/panvimdoc.lua">panvimdoc.lua</a>. See <a href="./panvimdoc.sh">panvimdoc.sh</a> for how to use this script, or check the <a href="#usage">Usage</a> section.</p>
<p>If you would like to contribute to the specification, have feature requests or opinions, please feel free to comment here: <a href="https://github.com/kdheepak/panvimdoc/discussions/11" class="uri">https://github.com/kdheepak/panvimdoc/discussions/11</a>.</p>
<h1 id="references">References</h1>
<ul>
<li><a href="https://learnvimscriptthehardway.stevelosh.com/chapters/54.html" class="uri">https://learnvimscriptthehardway.stevelosh.com/chapters/54.html</a></li>
<li><a href="https://github.com/nanotee/vimdoc-notes" class="uri">https://github.com/nanotee/vimdoc-notes</a></li>
<li><a href="https://github.com/mjlbach/babelfish.nvim" class="uri">https://github.com/mjlbach/babelfish.nvim</a></li>
<li><a href="https://foosoft.net/projects/md2vim/" class="uri">https://foosoft.net/projects/md2vim/</a></li>
<li><a href="https://github.com/wincent/docvim" class="uri">https://github.com/wincent/docvim</a></li>
<li><a href="https://github.com/Orange-OpenSource/pandoc-terminal-writer/" class="uri">https://github.com/Orange-OpenSource/pandoc-terminal-writer/</a></li>
</ul>
<h1 id="specification">Specification</h1>
<p>See <a href="./panvimdoc.txt">./panvimdoc.txt</a> for generated output of this file.</p>
<h2 id="external-includes">External includes</h2>
<p>Use the following in your markdown file to include any other markdown file:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{.include}</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="in">README.md</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>The path of the file is with respect to the working directory where <code>pandoc</code> is executed.</p>
<h2 id="codeblocks">Codeblocks</h2>
<pre><code>Multi line Code blocks are indented 4 spaces and

are formatted

appropriately with &gt; and &lt;.</code></pre>
<p>Alternatively, you can use <code>vimdoc</code> as the language for the code block to write raw text that will be inserted into the final document.</p>
<p>For example, the following:</p>
<pre><code>```vimdoc
You can use codeblocks that have language as `vimdoc` to write raw vimdoc.
```</code></pre>
<p>will be rendered verbatim in the generated documentation.</p>
<!-- panvimdoc-ignore-start -->
<p>e.g.:</p>
<pre class="vimdoc"><code>You can use codeblocks that have language as `vimdoc` to write raw vimdoc.</code></pre>
<!-- panvimdoc-ignore-end -->
<p>This can be used to write any custom whitespace formatted documentation in the generated vimdoc (for mappings, options etc).</p>
<h1 id="title">Title</h1>
<p>The first line of the documentation that is generated will look something like this:</p>
<pre><code>*panvimdoc.txt*    For VIM - Vi IMproved 8.1       Last change: 2021 August 11</code></pre>
<h1 id="heading">Heading</h1>
<p>Main headings are numbered.</p>
<!-- panvimdoc-ignore-start -->
<p>e.g.:</p>
<pre><code>==============================================================================
2. Heading                                                 *panvimdoc-heading*

Main headings are numbered.</code></pre>
<!-- panvimdoc-ignore-end -->
<h2 id="sub-heading-2">Sub Heading 2</h2>
<p>Sub headings are upper cased heading.</p>
<!-- panvimdoc-ignore-start -->
<p>e.g.:</p>
<pre><code>SUB HEADING 2                                        *panvimdoc-sub-heading-2*

Sub headings are upper cased heading.</code></pre>
<!-- panvimdoc-ignore-end -->
<p>Notice that both headings and subheadings have tags.</p>
<h3 id="sub-heading-3">Sub Heading 3</h3>
<p>Sub headings are upper cased, but do not have tags. They are also not included in the TOC. They are suffixed with <code>~</code> which highlights as <strong>bold</strong> text when the file is viewed on GitHub.</p>
<h2 id="markdown-links">Markdown Links</h2>
<p>You can use markdown links in vimdoc.</p>
<!-- panvimdoc-ignore-start -->
<p>The following markdown:</p>
<!-- panvimdoc-ignore-end -->
<div class="sourceCode" id="cb14"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>You can link to the tags by using <span class="co">[</span><span class="ot">sub heading 2</span><span class="co">](#sub-heading-2)</span>.</span></code></pre></div>
<!-- panvimdoc-ignore-start -->
<p>is converted to the following vimdoc:</p>
<pre><code>You can link to the tags by using |projectName-sub-heading-2|.</code></pre>
<!-- panvimdoc-ignore-end -->
<p>This way, any links will work in markdown README on GitHub or on the web using anchors AND will work as tags and links in vimdoc. The anchors are simply dropped in vimdoc inline. The onus is on the documentation writer to choose the correct anchor for the appropriate Markdown link.</p>
<p>In vimdoc tags are created when anchors to the internal document are used. If the target is an external link, the link is inlined.</p>
<p>If the external link is to the neovim documentation, an internal vim link is generated. For example:</p>
<ul>
<li><a href="https://neovim.io/doc/user/options.html#&#39;cursorcolumn&#39;">cursorcolumn</a></li>
<li><a href="https://neovim.io/doc/user/options.html#&#39;completeopt&#39;"><code>completeopt</code></a></li>
<li><a href="https://github.com/vim/vim">vim</a></li>
<li><a href="https://github.com/neovim/neovim">neovim</a></li>
</ul>
<!-- panvimdoc-ignore-start -->
<p>The following is generated in vimdoc:</p>
<pre><code>- |cursorcolumn|
- |`completeopt`|
- vim &lt;https://github.com/vim/vim&gt;
- neovim &lt;https://github.com/neovim/neovim&gt;</code></pre>
<!-- panvimdoc-ignore-end -->
<p>This is excluded from the links section.</p>
<p>Lastly, if the markdown text is a url, the link is not added to the links section and instead is placed inline.</p>
<h2 id="mappings">Mappings</h2>
<p>While you can use codeblocks with the language <code>vimdoc</code> to insert text in the generated vimdoc, it can be useful to have a markdown friendly way to write documentation for mappings.</p>
<p>Pandoc supports definition lists: <a href="https://pandoc.org/MANUAL.html#definition-lists" class="uri">https://pandoc.org/MANUAL.html#definition-lists</a>. This can be used to generate documentation of mappings. All of the content in curly braces <code>{...}</code> that is part of the header is dropped and a tag is created.</p>
<p>For example, the following in a markdown file:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>:FnlCompileBuffer</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>: Compiles current active fennel buffer</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>:FnlCompile<span class="co">[</span><span class="ot">!</span><span class="co">]</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>: Diff compiles all indexed fennel files</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>If bang! is present then forcefully compiles all <span class="in">`source`</span> files</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>:Fnl {expr}</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>: Executes and Evalutate {expr} of fennel</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="in">     ```fennel</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="in">     :Fnl (print &quot;Hello World&quot;)</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="in">     :Fnl (values some_var)</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="in">     ```</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="in">     Testing</span></span></code></pre></div>
<p>becomes the following vimdoc:</p>
<pre><code>
                                             *projectName-:FnlCompileBuffer*


:FnlCompileBuffer                      Compiles current active fennel buffer


                                                   *projectName-:FnlCompile*


:FnlCompile[!]                         Diff compiles all indexed fennel files
                                       If bang! is present then forcefully compiles all `source` files


                                                          *projectName-:Fnl*


:Fnl {expr}                            Executes and Evalutate {expr} of fennel
                                       &gt;fennel
                                           :Fnl (print &quot;Hello World&quot;)

                                           :Fnl (values some_var)
                                       &lt;
                                       Testing</code></pre>
<p>Notice that the tag <code>*projectName-:Command*</code> is generated for you. Additionally, content in square brackets <code>[...]</code> or curly brackets <code>{...}</code> is also dropped for creating the tag name.</p>
<p>i.e. the term <code>### :[range]Command</code> becomes the tag <code>*projectName-:Command*</code>.</p>
<p>See following mappings as examples:</p>
<!-- prettier-ignore-start -->
<dl>
<dt>pv{motion}</dt>
<dd>
<p>Command that operates over {motion} moved.</p>
</dd>
</dl>
<!-- panvimdoc-ignore-start -->
<p>The following vimdoc mapping is generated:</p>
<pre><code>                                                              *panvimdoc-pv*


pv{motion}                             Command that operates over {motion} moved.</code></pre>
<!-- panvimdoc-ignore-end -->
<dl>
<dt>pvd</dt>
<dd>
<p>Command that takes [count] lines.</p>
</dd>
</dl>
<!-- panvimdoc-ignore-start -->
<p>The following vimdoc mapping is generated:</p>
<pre><code>                                                             *panvimdoc-pvd*


pvd                                    Command that takes [count] lines.</code></pre>
<!-- panvimdoc-ignore-end -->
<dl>
<dt>:[range]CommandName {doc=CommandName}</dt>
<dd>
<p>Command that operates over [range].</p>
</dd>
</dl>
<!-- panvimdoc-ignore-start -->
<p>The following vimdoc mapping is generated:</p>
<pre><code>                                                    *panvimdoc-:CommandName*


:[range]CommandName {doc=CommandName}  Command that operates over [range].</code></pre>
<!-- panvimdoc-ignore-end -->
<dl>
<dt>{Visual}pv</dt>
<dd>
<p>Command that operates over highlighted lines.</p>
</dd>
</dl>
<!-- panvimdoc-ignore-start -->
<p>The following vimdoc mapping is generated:</p>
<pre><code>                                                              *panvimdoc-pv*


{Visual}pv                             Command that operates over highlighted lines.</code></pre>
<!-- panvimdoc-ignore-end -->
<!-- prettier-ignore-end -->
<h2 id="table">Table</h2>
<p>Support for markdown tables is also available:</p>
<!-- prettier-ignore-start -->
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 8%" />
<col style="width: 5%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Background</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>lightness</td>
<td>light</td>
<td><code>nil</code></td>
<td>Change background colors lightness. Options: <code>'bright'</code>, <code>'dim'</code>.</td>
</tr>
<tr class="even">
<td>darkness</td>
<td>dark</td>
<td><code>nil</code></td>
<td>Change background colors darkness. Options: <code>'stark'</code>, <code>'warm'</code>.</td>
</tr>
<tr class="odd">
<td>solid_vert_split</td>
<td>both</td>
<td><code>false</code></td>
<td>Solid |hl-VertSplit| background.</td>
</tr>
<tr class="even">
<td>solid_line_nr</td>
<td>both</td>
<td><code>false</code></td>
<td>Solid |hl-LineNr| background.</td>
</tr>
<tr class="odd">
<td>solid_float_border</td>
<td>both</td>
<td><code>false</code></td>
<td>Make |hl-FloatBorder| have a more distinguishable background highlight.</td>
</tr>
<tr class="even">
<td>darken_noncurrent_window</td>
<td>light</td>
<td><code>false</code></td>
<td>Make non-current window background darker than <em>Normal</em>.</td>
</tr>
<tr class="odd">
<td>lighten_noncurrent_window</td>
<td>dark</td>
<td><code>false</code></td>
<td>Make non-current window background lighter than <em>Normal</em>.</td>
</tr>
<tr class="even">
<td>italic_comments</td>
<td>both</td>
<td><code>true</code></td>
<td>Make comments italicize.</td>
</tr>
<tr class="odd">
<td>darken_comments</td>
<td>light</td>
<td><code>38</code></td>
<td>Percentage to darken comments relative to Normal bg.</td>
</tr>
<tr class="even">
<td>lighten_comments</td>
<td>dark</td>
<td><code>38</code></td>
<td>Percentage to lighten comments relative to Normal bg.</td>
</tr>
<tr class="odd">
<td>darken_non_text</td>
<td>light</td>
<td><code>25</code></td>
<td>Percentage to darken |hl-NonText| relative to Normal bg.</td>
</tr>
<tr class="even">
<td>lighten_non_text</td>
<td>dark</td>
<td><code>30</code></td>
<td>Percentage to lighten |hl-NonText| relative to Normal bg.</td>
</tr>
<tr class="odd">
<td>darken_line_nr</td>
<td>light</td>
<td><code>33</code></td>
<td>Percentage to darken |hl-LineNr| relative to Normal bg.</td>
</tr>
<tr class="even">
<td>lighten_line_nr</td>
<td>dark</td>
<td><code>35</code></td>
<td>Percentage to lighten |hl-LineNr| relative to Normal bg.</td>
</tr>
<tr class="odd">
<td>darken_cursor_line</td>
<td>light</td>
<td><code>3</code></td>
<td>Percentage to darken |hl-CursorLine| relative to Normal bg.</td>
</tr>
<tr class="even">
<td>lighten_cursor_line</td>
<td>dark</td>
<td><code>4</code></td>
<td>Percentage to lighten |hl-CursorLine| relative to Normal bg.</td>
</tr>
<tr class="odd">
<td>colorize_diagnostic_underline_text</td>
<td>both</td>
<td><code>false</code></td>
<td>Colorize the fg of <code>DiagnosticUnderline*</code>.</td>
</tr>
<tr class="even">
<td>transparent_background</td>
<td>both</td>
<td><code>false</code></td>
<td>Make background transparent.</td>
</tr>
</tbody>
</table>
<!-- prettier-ignore-end -->
<!-- panvimdoc-ignore-start -->
<p>The following gets generated:</p>
<pre><code>  -----------------------------------------------------------------------------------------------------
  Option                               Background   Default   Description
  ------------------------------------ ------------ --------- -----------------------------------------
  lightness                            light        nil       Change background colors lightness.
                                                              Options: &#39;bright&#39;, &#39;dim&#39;.

  darkness                             dark         nil       Change background colors darkness.
                                                              Options: &#39;stark&#39;, &#39;warm&#39;.

  solid_vert_split                     both         false     Solid |hl-VertSplit| background.

  solid_line_nr                        both         false     Solid |hl-LineNr| background.

  solid_float_border                   both         false     Make |hl-FloatBorder| have a more
                                                              distinguishable background highlight.

  darken_noncurrent_window             light        false     Make non-current window background darker
                                                              than Normal.

  lighten_noncurrent_window            dark         false     Make non-current window background
                                                              lighter than Normal.

  italic_comments                      both         true      Make comments italicize.

  darken_comments                      light        38        Percentage to darken comments relative to
                                                              Normal bg.

  lighten_comments                     dark         38        Percentage to lighten comments relative
                                                              to Normal bg.

  darken_non_text                      light        25        Percentage to darken |hl-NonText|
                                                              relative to Normal bg.

  lighten_non_text                     dark         30        Percentage to lighten |hl-NonText|
                                                              relative to Normal bg.

  darken_line_nr                       light        33        Percentage to darken |hl-LineNr| relative
                                                              to Normal bg.

  lighten_line_nr                      dark         35        Percentage to lighten |hl-LineNr|
                                                              relative to Normal bg.

  darken_cursor_line                   light        3         Percentage to darken |hl-CursorLine|
                                                              relative to Normal bg.

  lighten_cursor_line                  dark         4         Percentage to lighten |hl-CursorLine|
                                                              relative to Normal bg.

  colorize_diagnostic_underline_text   both         false     Colorize the fg of DiagnosticUnderline*.

  transparent_background               both         false     Make background transparent.
  -----------------------------------------------------------------------------------------------------</code></pre>
<!-- panvimdoc-ignore-end -->
<h2 id="markdown-only-content">Markdown only content</h2>
<p>Sometimes you want to show content that is to be present in Markdown and on the rendered view on GitHub but ignored in the generated vimdoc. This can be placed inside <code>panvimdoc-ignore-{start/end}</code> blocks:</p>
<pre><code>&lt;!-- panvimdoc-ignore-start --&gt;

&lt;details&gt;
    &lt;summary&gt;Vimdoc Ignored Section&lt;/summary&gt;

This section will ignored when generating the vimdoc file.
This will only show up in the Markdown file.

&lt;/details&gt;

&lt;!-- panvimdoc-ignore-end --&gt;</code></pre>
<p>The following will only be present in the Markdown document.</p>
<!-- panvimdoc-ignore-start -->
<details>
<summary>
Vimdoc Ignored Section
</summary>
<p>This section will ignored when generating the vimdoc file. This will only show up in the Markdown file. See the raw markdown of this file for examples.</p>
</details>
<!-- panvimdoc-ignore-end -->
<p>The convenient advantage of using <code>&lt;!-- panvimdoc-ignore-{start/end} --&gt;</code> blocks in a HTML comment syntax is that the comment will not rendered in HTML or on GitHub, giving the documentation writers control to present the information differently on GitHub and in vimdoc. If you want to see examples of this, see the raw markdown version of this file.</p>
<p>The only thing to keep in mind is that you must leave new line spaces before and after a comment tag. For example, <strong>do not</strong> do this:</p>
<pre><code>&lt;!-- panvimdoc-ignore-start --&gt;
![screenshot](./gif.gif)
&lt;!-- panvimdoc-ignore-end --&gt;</code></pre>
<p>because it may cause the rest of your document to be ignored. Do this instead:</p>
<pre><code>&lt;!-- panvimdoc-ignore-start --&gt;

![screenshot](./gif.gif)

&lt;!-- panvimdoc-ignore-end --&gt;</code></pre>
<h2 id="details-and-summary">Details and summary</h2>
<p>You can even use <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> tags for your README.md.</p>
<details>
<summary>
<b>Summary</b>
</summary>
<p>This section is the details.</p>
</details>
<!-- panvimdoc-ignore-start -->
<p>This gets rendered as:</p>
<pre><code>Summary ~

This section is the details.</code></pre>
<!-- panvimdoc-ignore-end -->
<p>The <code>html</code> tags are dropped and the following output is generated in the vimdoc file.</p>
<p>If you are using html <code>&lt;b&gt; ... &lt;/b&gt;</code> tags, use them on new lines. <b>Inline bold tags</b> will have a <code>~</code> appended to the text and that may not be what you want.</p>
<h2 id="keyboard-html-tag">Keyboard HTML tag</h2>
<p>Use <code>&lt;kbd&gt;CMD + o&lt;/kbd&gt;</code> in markdown, for example <kbd>CMD + o</kbd>.</p>
<!-- panvimdoc-ignore-start -->
<p>This gets rendered as:</p>
<pre><code>Use `&lt;kbd&gt;CMD + o&lt;/kbd&gt;` in markdown, for example CMD + o.</code></pre>
<!-- panvimdoc-ignore-end -->
<h2 id="examples">Examples</h2>
<p>First example</p>
<h2 id="examples-1">Examples</h2>
<p>Second example</p>
</main>

<script>
;(function() {
  // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
  var selector = '.task-list > li > input[type="checkbox"]';
  var checkboxes = document.querySelectorAll(selector);
  Array.from(checkboxes).forEach((checkbox) => {
    var wasChecked = checkbox.checked;
    checkbox.disabled = false;
    checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
  });
})();
</script>
</body>
</html>
